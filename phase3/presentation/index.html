<!doctype html>
<html>
    <head>
        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/black.css" id="theme">
        <!--link rel="stylesheet" href="css/theme/white.css" id="theme"-->
        <link rel="stylesheet" href="css/gnb.css">
        <link rel="stylesheet" media="print" href="css/print/pdf.css" />
    </head>
    <body>
        <div class="reveal">
            <div class="slides">

                <section data-state="intro">
                    <img src="pictures/gnb_logo.svg" class="logo">
                    <h1>Secure Coding</h1>
                    <h2>Team 12 - Phase 3</h2>

                    <h3>Members</h3>
                    <table>
                        <tr>
                            <td class="left">Alexander Lill</td>
                            <td class="right">Lorenzo Donini</td>
                        </tr>
                        <tr>
                            <td class="left">Florian Mauracher</td>
                            <td class="right">Mahmoud Naser</td>
                        </tr>
                    </table>
                </section>


                <section data-state="use-cases">

                    <section>
                        <h1>Use-Cases</h1>
                    </section>

                    <section>
                        <h2>Use-Cases Phase 1</h2>

                        <table class="usecase-table">
                            <tr>
                                <th>Usecase</th>
                                <th>Status</th>
                            </tr>
                            <tr>
                                <td>Customer / Employee registration (including sending e-mail with TANs)</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Customer / Employee login</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Customer / Employee logout</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Customer / Employee views bank account details of Customer</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Customer / Employee views transaction history of Customer</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Customer money transfer via HTML form (using TAN)</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Customer money transfer via uploading transaction batch file (using TAN)</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Employee approves transfers larger than 10.000 EUR</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Employee approves registration of Customer or of other employee</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Customer / Employee downloads transaction history of Customer as PDF</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Transaction verification page</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Search feature for user accounts</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Employee rejects transfers larger than 10.000 EUR</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Employee rejects registration of Customer or of other employee</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                        </table>

                    </section>

                    <section>
                        <h2>Use-Cases Phase 3</h2>

                        <table class="usecase-table">
                            <tr>
                                <th>Usecase</th>
                                <th>Status</th>
                            </tr>
                            <tr>
                                <td>Password recovery</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Encrypted TAN generation and delivery via e-mail to customer</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Download of SCS after registration</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Transfer using SCS (Single transaction)</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                            <tr>
                                <td>Transfer using SCS (Batch transaction)</td>
                                <td><span class="working">WORKING</span></td>
                            </tr>
                        </table>

                    </section>

                </section>

                <section data-state="vulns">

                    <section>
                        <h1>Vulnerabilities</h1>
                    </section>

                    <!--section>
                    
                        Core of presentation: at this point in the presentation you must talk about:

                        Vulnerabilities (possible exploits of the vulnerabilities) and how you fixed them.
                        Feel free to go into technical details, but keep it short, clear and entertaining.
                        Report possible changes in OWASP and CVSS values (e.g. from high to medium,
                        etc.) including reasoning for these changes in the values.

                    </section-->

					<section>
						<h3>The HTTPS Migration</h3>
						<p class="fix-description">
							Moving the website from HTTP to HTTPS solved a large amount of issues that was related to clear text data.
						</p>
					</section>
					<section>
						<h3>Moving the webserver DocumentRoot</h3>
						<p class="fix-description">
							One of the major vulnerabilities was the fact that a few files were accessible through the webserver DocumentRoot. These files included sensitive infomration regarding the configuration of the system.
							
							Our solution was to change the webserver DocumentRoot to the folder that only contains the PHP code and no sensitive information.
						</p>
					</section>
					<section>
						<h3>Timing Attack</h3>
						<p class="fix-description">
							One of the vulnerbilities was a timing attack, where the login page would reply within 50ms if the mail address was valid and within around 25ms if the mail address was not valid.
							
							While minor, this attack could be used to check whether a certain email is registered at our bank or not.
							
							To overcome this a random customized waiting period was introduced to all login attemps, making the response time for both cases very similiar.
						</p>
					</section>
					<section>
						<h3>Unsanitized Input</h3>
						<p class="fix-description">
							Creating a unified sanitizing function was the solution to combating unsanitiziaton.
						</p>
					</section>
					<section>
						<h3>Integer overflow</h3>
						<p class="fix-description">
							This was due to a comparison between a long long value and an integer value inside the C parser. By changing the integer to a long long value,
							this was fixed.
						</p>
					</section>
					<section>
						<h3>Clickjacking</h3>
						<p class="fix-description">
							This has been rectified through the updated security policy and the X-FRAME-OPTIONS which have been set to DENY.
						</p>
					</section>
					
                </section>

                <section>
                    <h1>
                        Thanks for your attention!
                    </h1>
                </section>


                <!-- FOLLOWING SECTIONS DONT NEED TO BE PRESENTED! -->


                <section>

                    <section>
                        <h1>
                            Fixes
                        </h1>
                    </section>

                    <!--section>
                        Fix slides: For each vulnerability discovered in Phase 2 by your team or the team that tested your
                        application, you should summarize the fix that you implemented:
                        - Path(s) of file(s) which was modified for the fix
                        - Line number(s) which were modified in each file
                        - NOTE: You can use a diff utility but you should only report the changes relevant for one particular
                        fix per vulnerability (not just a diff of all changes to phase 1).
                        - Textual description of your countermeasures and the reason why they fix the problem.
                    </section-->

                    <section>
                        <h5>OTG-CONFIG-003</h5>
                        <h3>File Extensions Handling for Sensitive Information</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>N/A</td>
                                <td>N/A</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            This vulnerbility was due to an error in setting up the github directory, this was remediated by editing the DocumentRoot value in the apache settings
                        </p>
                    </section>

                    <section>
                        <h5>OTG-CONFIG-007</h5>
                        <h3>HTTP Strict Transport Security</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>N/A</td>
                                <td>N/A</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            This check will no longer be needed as the HTTP option is no longer an option on the website, as the website is only available in HTTPS.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-AUTHN-001</h5>
                        <h3>Credentials Transported over an Encrypted Channel</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>N/A</td>
                                <td>N/A</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            This has been fixed by the implemenation of HTTPS on the website,<br>and credentials are no longer sent in clear text. 
                        </p>
                    </section>

                    <section>
                        <h5>OTG-AUTHN-003</h5>
                        <h3>Weak lockout mechanism</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/project/employee/manage_blocked.php</td>
                                <td>New file</td>
                            </tr>
                            <tr>
                                <td>/gnb/project/js/employee.js</td>
                                <td>+lines 69-84</td>
                            </tr>
                            <tr>
                                <td>/gnb/project/models/user.php</td>
                                <td>+lines 141-154</td>
                            </tr>
                            <tr>
                                <td>/gnb/project/db.php</td>
                                <td>+lines 287-366</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            A lockout mechanism was implemented: after failing a login 5 times in a row
                            (status is kept in database), a user account automatically gets blocked.
                            A new section in the employee area was added in order to allow employees
                            to unblock user accounts which have been blocked.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-AUTHN-004</h5>
                        <h3>Bypassing authentication schema</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/project/login.php</td>
                                <td>+lines 19</td>
                            </tr>
							<tr>
                                <td>/gnb/project/logout.php</td>
                                <td>+lines 5</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            The issue here was the constant SESSION_ID. This has now been fixed,<br>and a new SESSION ID is generated every time.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-AUTHN-005</h5>
                        <h3>Remember password functionality</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>N/A</td>
                                <td>N/A</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            This was also remediated through the implementation of HTTPS,<br>see OTG-AUTHN-001.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-AUTHN-007</h5>
                        <h3>Weak password policy</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/project/js/registration.js</td>
                                <td>+lines 21-45</td>
                            </tr>
                            <tr>
                                <td>/gnb/project/registration/registration_request.php</td>
                                <td>+lines 3-15</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            In order to prevent weak passwords, the user is now forced to enter a password
                            between 8 and 20 characters long, containing at least 1 number and 1 letter. Any special
                            character is allowed. The password strength check is performed both on client side and
                            server side during the registration process.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-AUTHZ-001</h5>
                        <h3>Directory traversal/file include</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>N/A</td>
                                <td>N/A</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            This was fixed by the same fix implemented in OTG-CONFIG-003.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-AUTHZ-002</h5>
                        <h3>Bypassing authorization schema</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr class="smallText">
                                <td>/gnb/project/employee:<br>
                                    client_details.php,
                                    client_transaction_details.php,
                                    employee_area.php,
                                    employee_overview.php,
                                    manage_clients.php,
                                    manage_registration.php,
                                    manage_transfer.php,
                                    transfer_details.php,
                                    search_client.php
                                    </td>
                                <td>+lines 5-21</td>
                            </tr>
                            <tr class="smallText">
                                <td>/gnb/project/accounts:<br>
                                    account_overview.php,
                                    download_transactions.php,
                                    my_accounts.php,
                                    new_transaction.php,
                                    new_transaction_multiple.php,
                                    transaction_history.php,
                                    transaction_view.php,
                                    verify_transaction.php
                                </td>
                                <td>+lines 5-16</td>
                            </tr>
                            <tr class="smallText">
                                <td>/gnb/project/client/client_overview.php
                                </td>
                                <td>+lines 6-21</td>
                            </tr>
                            <tr class="smallText">
                                <td>/gnb/project/registration:<br>
                                    registration_default.php,
                                    registration_pin.php,
                                    registration_request.php
                                </td>
                                <td>+lines 5-14</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            Pages, sections and frames are no longer directly accessible, since checks
                            are performed at the beginning of each php file: only users with the correct
                            permissions are allowed to access specific pages.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-AUTHZ-004</h5>
                        <h3>Insecure Direct Object References</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>N/A</td>
                                <td>N/A</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            Please refer to OTG-CRYPST-003 for this fix, since the vulnerability was<br> based
                            on the usage of an unencrypted communication channel.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-SESS-001</h5>
                        <h3>Bypassing Session Management Schema</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>N/A</td>
                                <td>N/A</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            This was also remediated through the implementation of HTTPS,<br>see OTG-AUTHN-001. SESSION ID is no longer sent in clear text.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-SESS-002</h5>
                        <h3>Cookies attributes</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>N/A</td>
                                <td>N/A</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            This was also remediated through the implementation of HTTPS,<br>see OTG-AUTHN-001. SESSION ID is no longer sent in clear text.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-SESS-003</h5>
                        <h3>Session Fixation</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/project/login.php</td>
                                <td>+lines 19</td>
                            </tr>
							<tr>
                                <td>/gnb/project/logout.php</td>
                                <td>+lines 5</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            This was fixed by the same fix in OTG-AUTHN-004.<br>SESSION ID is now renewed each time.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-SESS-004</h5>
                        <h3>Exposed Session Variables</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>N/A</td>
                                <td>N/A</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            This was also remediated through the implementation of HTTPS,<br>see OTG-AUTHN-001. SESSION ID is no longer sent in clear text.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-SESS-005</h5>
                        <h3>Cross Site Request Forgery</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/project/accounts/new_transaction.php</td>
                                <td>+lines 17-24, 54</td>
                            </tr>
                            <tr>
                                <td>/gnb/project/accounts/new_transaction_multiple.php</td>
                                <td>+lines 21-27, 66-73, 130</td>
                            </tr>
                            <tr>
                                <td>/gnb/project/accounts/verify_transaction.php</td>
                                <td>+lines 16-21, 59, 108, 146, 165</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            This issue has been resolved by adding a randomly generated token to all the forms. This token is checked on receiving the values of the form to detect Cross Site Request Forgery.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-SESS-007</h5>
                        <h3>Session Timeout</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>config/php5/apache2/php.ini</td>
                                <td>line 1515</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            This has been fixed by modifying the PHP settings file.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-INPVAL-001</h5>
                        <h3>Reflected Cross Site Scripting</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/project/genericfunctions.php</td>
                                <td>new file (+lines 10-103)</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            Reflected XSS worked on the verify_transaction.php page by printing
                            the description inserted by the user on the previous page. By performing input
                            sanitization on every request parameter, this attack is not longer possible.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-INPVAL-002</h5>
                        <h3>Stored Cross Site Scripting</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/project/genericfunctions.php</td>
                                <td>new file (+lines 10-103)</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            Similarly to the reflected XSS, the site was vulnerable because of lack of input
                            sanitization. All user inputs get now properly sanitized, removing html characters.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-INPVAL-005</h5>
                        <h3>SQL injection</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr class="smallText">
                                <td>/gnb/project/db.php</td>
                                <td>new file (+lines 1-1092)</td>
                            </tr>
                            <tr class="smallText">
                                <td>/gnb/config/database/setup.php, /gnb/project/accounts/account_overview.php, /gnb/project/accounts/download_transactions.php, /gnb/project/accounts/my_accounts.php, /gnb/project/accounts/new_transaction.php, /gnb/project/accounts/transaction_history.php, /gnb/project/accounts/transaction_view.php, /gnb/project/accounts/verify_transaction.php, /gnb/project/authentication.php, /gnb/project/awesome_data.php, /gnb/project/employee/client_details.php, /gnb/project/employee/client_transaction_details.php, /gnb/project/employee/manage_registration.php, /gnb/project/employee/manage_transfer.php, /gnb/project/employee/search_client.php, /gnb/project/employee/transfer_details.php, /gnb/project/models/account.php, /gnb/project/models/transaction.php, /gnb/project/models/user.php, /gnb/project/registration/registration_request.php, /gnb/project/resource_mappings.php</td>
                                <td>modified all lines with "DB::i()->"</td>
                            </tr>
                            <tr class="smallText">
                                <td>/gnb/project/dbheader.php</td>
                                <td>removed file</td>
                            </tr>
                             
                        </table>
                        <p class="fix-description">
                            This issue has been resolved by using prepared statements instead of pure <code>mysql_*</code> commands. This was accomplished by using <code>PDO</code> and its functionality for building prepared statements. This validates the input for its data type and prevents SQL injections.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-INPVAL-013</h5>
                        <h3>Command injection</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/project/accounts/new_transaction_multiple.php</td>
                                <td>-lines 20-27<br>+lines 21-30</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            Since command injection was possible by injecting commands into filenames,
                            this is no longer possible as each uploaded file gets automatically renamed.
                            Even though the c parser receives additional parameters,
                            these are passed directly by the application and cannot be injected by an attacker.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-INPVAL-014</h5>
                        <h3>Buffer overflow</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>gnb/project/lib/ctransact/src/ctransact.c</td>
                                <td>+line 284</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            The application was never vulnerable to buffer overflow,
                            but only to integer overflow. This was due to a comparison between a long long value and
                            an integer value inside the c parser. By changing the integer to a long long value,
                            this is no longer possible.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-INPVAL-015</h5>
                        <h3>Incubated vulnerabilities</h3>
                        <table class="fix-table">
                            <tr>
                                <th>Changed files</th>
                            </tr>
                            <tr>
                                <td>See fix slides OTG-INPVAL 001, 002, 005</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            By having fixed the SQL injection and stored XSS vulnerabilities,
                            this vulnerability was automatically fixed. Please refer to the fix
                            slides concerning OTG-INPVAL 001, 002, 005.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-CRYPST-003</h5>
                        <h3>Sensitive information sent via unencrypted channels</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>N/A</td>
                                <td>N/A</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                           This was also remediated through the implementation of HTTPS, see OTG-AUTHN-001. SESSION ID is no longer sent in clear text. 
                        </p>
                    </section>

                    <section>
                        <h5>OTG-BUSLOGIC-001</h5>
                        <h3>Business logic data validation</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/project/dp.php</td>
                                <td>+lines 1234-1237</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            In order to prevent a user incrementing his balance by sending money to his own account,
                            we added a check before performing a transaction.
                            A user is not allowed to use his own account as a destination anymore.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-BUSLOGIC-002</h5>
                        <h3>Ability to Forge Requests</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>N/A</td>
                                <td>N/A</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            This was fixed with the same fix as OTG-SESS-005, see section for more details.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-BUSLOGIC-004</h5>
                        <h3>Process Timing</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/project/db.php</td>
                                <td>+line 224,238-246</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            This was fixed by adding a random waiting time to all login requests.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-BUSLOGIC-007</h5>
                        <h3>Defenses Against Application Mis-use</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>N/A</td>
                                <td>N/A</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            Since the described vulnerability was the same as the one presented in OTG-BUSLOGIC-001,
                            please refer to the fix made in that section.
                        </p>
                    </section>
                    <section>
                        <h5>OTG-BUSLOGIC-009</h5>
                        <h3>Upload of malicious files</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/project/accounts/new_transaction_multiple.php</td>
                                <td>-lines 20-27<br>+lines 21-30</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            Each uploaded file now gets automatically renamed.
                            Furthermore, after a batch transaction process finished,
                            the uploaded file gets removed from the uploads folder.
                        </p>
                    </section>

                    <section>
                        <h5>OTG-CLIENT-009</h5>
                        <h3>Clickjacking</h3>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/config/apache2/httpd.conf</td>
                                <td>+lines 1-7</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            This has been rectified through the updated security policy and The X-FRAME-OPTIONS has been set to DENY.
                        </p>
                    </section>

                </section>


                <section>

                    <section>
                        <h1>
                            Use-Cases
                        </h1>
                    </section>

                    <section>

                        <h2>Password recovery</h2>

                        <table class="usecase-table">
                            <tr>
                                <td>Goal</td>
                                <td>
                                    Reset a users password in case it is not remembered any longer.
                                </td>
                            </tr>
                            <tr>
                                <td>Actors</td>
                                <td>
                                    All users (Customers and Employees)
                                </td>
                            </tr>
                            <tr>
                                <td>Pre-Conditions</td>
                                <td>
                                    User account must exist and must know his PIN.
                                </td>
                            </tr>
                            <tr>
                                <td>Main course of execution</td>
                                <td>
                                    On the login page click on "Forgot your brocode?" and enter your
                                    email address. You will receive instructions to reset your password
                                    by mail.
                                </td>
                            </tr>
                            <tr>
                                <td>Alternate course</td>
                                <td>
                                    n/a
                                </td>
                            </tr>
                            <tr>
                                <td>Post conditions</td>
                                <td>
                                    Password is set to a new password by the user.
                                </td>
                            </tr>
                            <tr>
                                <td>Exceptions</td>
                                <td>
                                    Clicking on the received reset hash took longer than 1 day. It is necessary to get repeat the whole procedure.
                                </td>
                            </tr>
                            <tr>
                                <td>Data format used</td>
                                <td>
                                    n/a
                                </td>
                            </tr>
                        </table>

                    </section>

                    <section>

                        <h2>Encrypted TAN generation and delivery via e-mail to customer</h2>

                        <table class="usecase-table">
                            <tr>
                                <td>Goal</td>
                                <td>
                                    Send the TANs in an encrypted PDF to the customer.
                                </td>
                            </tr>
                            <tr>
                                <td>Actors</td>
                                <td>
                                    Customers that are using standard TANs.
                                </td>
                            </tr>
                            <tr>
                                <td>Pre-Conditions</td>
                                <td>
                                    Customer is approved and did select "TANs" as banking method at the registration.
                                </td>
                            </tr>
                            <tr>
                                <td>Main course of execution</td>
                                <td>
                                    Create new account, wait for approval by employee, log in and copy the shown password in order to open the encrypted PDF that was received by mail.
                                </td>
                            </tr>
                            <tr>
                                <td>Alternate course</td>
                                <td>
                                    n/a
                                </td>
                            </tr>
                            <tr>
                                <td>Post conditions</td>
                                <td>
                                    The customer has access to his TANs provided by the decrypted PDF.
                                </td>
                            </tr>
                            <tr>
                                <td>Exceptions</td>
                                <td>
                                    n/a
                                </td>
                            </tr>
                            <tr>
                                <td>Data format used</td>
                                <td>
                                    Encrypted PDF file
                                </td>
                            </tr>
                        </table>

                    </section>

                    <section>

                        <h2>Download of SCS <br> after registration</h2>

                        <table class="usecase-table">
                            <tr>
                                <td>Goal</td>
                                <td>
                                    Download the SmartCardSimulator after SCS was selected as the banking method.
                                </td>
                            </tr>
                            <tr>
                                <td>Actors</td>
                                <td>
                                    Customers that are using the SCS.
                                </td>
                            </tr>
                            <tr>
                                <td>Pre-Conditions</td>
                                <td>
                                    Customer is approved and did select "SCS" as banking method at the registration.
                                </td>
                            </tr>
                            <tr>
                                <td>Main course of execution</td>
                                <td>
                                    Create new account, wait for approval by employee and log in. Write down the provided PIN and download the provided Java-Application "SmartCardSimulator".
                                </td>
                            </tr>
                            <tr>
                                <td>Alternate course</td>
                                <td>
                                    n/a
                                </td>
                            </tr>
                            <tr>
                                <td>Post conditions</td>
                                <td>
                                    The customer has access to the SCS and can generate TANs using his PIN, the destination account number andthe transaction amount OR a transaction batch file including the aforementioned information.
                                </td>
                            </tr>
                            <tr>
                                <td>Exceptions</td>
                                <td>
                                    n/a
                                </td>
                            </tr>
                            <tr>
                                <td>Data format used</td>
                                <td>
                                    Java Application (requires Java 1.7)
                                </td>
                            </tr>
                        </table>

                    </section>

                    <section>

                        <h2>Transfer using SCS<br>(Single transaction)</h2>

                        <table class="usecase-table">
                            <tr>
                                <td>Goal</td>
                                <td>
                                    Create transactions using the SmartCardSimulator.
                                </td>
                            </tr>
                            <tr>
                                <td>Actors</td>
                                <td>
                                    Customers that are using the SCS.
                                </td>
                            </tr>
                            <tr>
                                <td>Pre-Conditions</td>
                                <td>
                                    Customer is approved, did select "SCS" as banking method at the registration, downloaded the SCS and remembers the PIN.
                                </td>
                            </tr>
                            <tr>
                                <td>Main course of execution</td>
                                <td>
                                    Customers enter the transaction details (destination account, transaction amount) and their PIN into the web interface and the SCS, and copy the TAN generated by the SCS into the web interface. The transaction is then posted and executed.
                                </td>
                            </tr>
                            <tr>
                                <td>Alternate course</td>
                                <td>
                                    see "Transfer using SCS - Batch transaction"
                                </td>
                            </tr>
                            <tr>
                                <td>Post conditions</td>
                                <td>
                                    The customer did create transactions using the SmartCardSimulator.
                                </td>
                            </tr>
                            <tr>
                                <td>Exceptions</td>
                                <td>
                                    n/a
                                </td>
                            </tr>
                            <tr>
                                <td>Data format used</td>
                                <td>
                                    Java Application (requires Java 1.7), batch processing format see "Batch transfers should allow multiple transfers via the same uploaded file"
                                </td>
                            </tr>
                        </table>

                    </section>

                    <section>
                        <h2>Transfer using SCS<br>(Batch Transaction)</h2>
                        <table class="usecase-table">
                            <tr>
                                <td>Goal</td>
                                <td>
                                    Execute multiple transactions sequentially by uploading a batch transaction file. The legitamacy of these transactions is verified by a TAN generated by the SCS.
                                </td>
                            </tr>
                            <tr>
                                <td>Actors</td>
                                <td>
                                    Customer
                                </td>
                            </tr>
                            <tr>
                                <td>Pre-Conditions</td>
                                <td>
                                    Customer must be logged in, have sufficient funds for all transactions and remember his PIN displayed at registration.
                                </td>
                            </tr>
                            <tr>
                                <td>Main course of execution</td>
                                <td>
                                    Logged in Customer switches to "My Accounts" page, selects an account, selects "New transaction (multiple)", chooses a file. He also enters a tan, which is generated by additionally opening the batch file in the SCS application in combination with his pin.
                                </td>
                            </tr>
                            <tr>
                                <td>Alternate course</td>
                                <td>
                                    Single transaction method. Entering every transaction individually via the web form as described above
                                </td>
                            </tr>
                            <tr>
                                <td>Post conditions</td>
                                <td>
                                    None
                                </td>
                            </tr>
                            <tr>
                                <td>Exceptions</td>
                                <td>
                                    Invalid batch file format. Insufficient funds.
                                </td>
                            </tr>
                            <tr>
                                <td>Data format used</td>
                                <td>
                                    Data format explained in detail on the next slide and on the "New transaction (multiple)" page
                                </td>
                            </tr>
                        </table>
                     </section>

                     <section>
                        <h2>Batch Transaction: Data format</h2>
                            <ul>
                                <li> Each transaction in a separate line
                                <li> Fields separated only by a comma
                                <li> No quoting of whitespace required
                                <li> The complete input between two commas gets treated as value
                                <li> Example: DST_ACCOUNT,AMOUNT,DESCRIPTION
                            </ul>
                     </section>

                 </section>

                <section>


                    <section>
                        <h1>Time-Tracking</h1>
                    </section>


                    <!-- ATTENTION!!! "info / student / task at hour granularity" -->


                    <section>
                        <h1>Alexander Lill</h1>

                        <table class="time-table-left">
                            <tr>
                                <th>Task</th>
                                <th>Time</th>
                            </tr>
                            <tr>
                                <td>Research fix: SQL Injection</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fix: SQL Injection - Login / Misc</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fix: SQL Injection - User functions</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fix: SQL Injection - Account functions</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fix: SQL Injection - TAN functions</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fix: SQL Injection - Transaction functions</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fix: SQL Injection - Overview functions</td>
                                <td>0,5h</td>
                            </tr>
                            <tr>
                                <td>Use DB as Singleton object and change all calls</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Adjust DB schema to new requirements</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Add PIN functionality to DB and PHP</td>
                                <td>1h</td>
                            </tr>
                        </table>
                        <table class="time-table-right">
                            <tr>
                                <td>Fix: Lockout - Add unblock user functionality</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fix: Lockout functionality</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Testing Lockout and unblock functionality</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Feature: SCS TAN handling (DB)</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Feature: Implement reset password functionality (DB)</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Prepare presentation</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Prepare deliverables</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fixing balanice initialization bugs</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Adding empty templates for vulnerabilits to presentation</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fix: Process timing</td>
                                <td>1h</td>
                            </tr>

                            <tr class="time-total">
                                <td>TOTAL</td>
                                <td>19,5h</td>
                            </tr>
                        </table>

                    </section>


                    <section>
                        <h1>Lorenzo Donini</h1>

                        <table class="time-table-left">
                            <tr>
                                <th>Task</th>
                                <th>Time</th>
                            </tr>
                            <tr>
                                <td>Group meeting</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fix: resource mappings</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fix: session</td>
                                <td>0.5h</td>
                            </tr>
                            <tr>
                                <td>Fix: password</td>
                                <td>0.5h</td>
                            </tr>
                            <tr>
                                <td>Fix: lockout mechanism</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Features/Use-cases testing</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Features/Use-cases bugfixing</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Registration: new business logic</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Registration: new GUI</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Registration: testing & fixing</td>
                                <td>1h</td>
                            </tr>
                        </table>
                        <table class="time-table-right">
                            <tr>
                                <td>Java SCS: GUI</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Java SCS: Business logic</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Java SCS: TAN generation</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Java SCS: Testing</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Transactions: single transactions logic changed</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Transactions: batch transactions logic changed</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Initialization of client balance added</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Presentation: core slides</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Presentation: fix slides</td>
                                <td>1h</td>
                            </tr>
                            <tr class="time-total">
                                <td>TOTAL</td>
                                <td>18h</td>
                            </tr>
                        </table>

                    </section>


                    <section>
                        <h1>Florian Mauracher</h1>

                        <table class="time-table-left">
                            <tr>
                                <th>Task</th>
                                <th>Time</th>
                            </tr>
                            <tr>
                                <td>Group meeting</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Read BBTesting report Team5</td>
                                <td>0.5h</td>
                            </tr>
                            <tr>
                                <td>Discuss Phase3 and coordinate work</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fix mail delivery</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Secure apache2 configuration</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Secure php configuration</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Prepare VM for Phase3</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Develop mechanism for TAN generation</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Discuss mechanism for TAN generation</td>
                                <td>1h</td>
                            </tr>
                        </table>
                        <table class="time-table-right">
                            <tr>
                                <td>Fix vulnerabilities in fileupload</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Multiple transactions, one TAN (PHP)</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Multiple transactions, one TAN (C)</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Verify SCS TANs for batch transactions</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Debug SCS logic for batch transactions</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fix timestamps for batch transactions</td>
                                <td>0.5h</td>
                            </tr>
                            <tr>
                                <td>Presentation: Fixes</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Presentation: Review</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Prepare delivery VM</td>
                                <td>1h</td>
                            </tr>
                            <tr class="time-total">
                                <td>TOTAL</td>
                                <td>17h</td>
                            </tr>
                        </table>

                    </section>


                    <section>
                        <h1>Mahmoud Naser</h1>

                        <table class="time-table-left">
							<tr>
                                <th colspan="2">[F]ix, [R]esearch, [I]mplement</td>
                            </tr>
							<tr>
                                <th colspan="2">[T]est, [P]resentation, [D]esign</td>
                            </tr>
                            <tr>
                                <td>[R] PW PDF</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>[I] FPDI library</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>[R] bugs with FPDI</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>[I] FPDI bug fixes</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>[I] FPDF library</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>[T] FPDF PW protection</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>[T] PDF PW on GNB Website</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>[F] PDF PW bugs</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                            <tr>
                                <td>[D] PW reset logic</td>
                                <td>0.5h</td>
                            </tr>
							<tr>
                                <td>[D] PW reset pages</td>
                                <td>1h</td>
                            </tr>
                        </table>
						<table class="time-table-right">
							<tr>
                                <td>[D] PW forgot logic</td>
                                <td>0.5h</td>
                            </tr>
                            <tr>
                                <td>[D] PW forgot pages</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>[D] email template </td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>[C] Token generetaion mechanisim</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>[F] PW email bugs</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>[C] Transaction history fields</td>
                                <td>1h</td>
                            </tr>
							<tr>
                                <td>[C] PDF transaction history fields</td>
                                <td>1h</td>
                            </tr>
							<tr>
                                <td>[F] Transaction bugs</td>
                                <td>1h</td>
                            </tr>
							<tr>
                                <td>[P] adding content</td>
                                <td>1h</td>
                            </tr>
							<tr class="time-total">
                                <td>TOTAL</td>
                                <td>18h</td>
                            </tr>
                        </table>
                    </section>


                </section>


            </div>
        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                transition: 'slide', // none/fade/slide/convex/concave/zoom

                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });
        </script>

    </body>
</html>
