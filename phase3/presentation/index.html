<!doctype html>
<html>
    <head>
        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/black.css" id="theme">
        <!--link rel="stylesheet" href="css/theme/white.css" id="theme"-->
        <link rel="stylesheet" href="css/gnb.css">
        <link rel="stylesheet" media="print" href="css/print/pdf.css" />
    </head>
    <body>
        <div class="reveal">
            <div class="slides">

                <section data-state="intro">
                    <img src="pictures/gnb_logo.svg" class="logo">
                    <h1>Secure Coding</h1>
                    <h2>Team 12 - Phase 3</h2>

                    <h3>Members</h3>
                    <table>
                        <tr>
                            <td class="left">Alexander Lill</td>
                            <td class="right">Lorenzo Donini</td>
                        </tr>
                        <tr>
                            <td class="left">Florian Mauracher</td>
                            <td class="right">Mahmoud Naser</td>
                        </tr>
                    </table>
                </section>


                <section data-state="use-cases">

                    Second slide: enumeration of use-cases that were fixed / work / do not work. At least
                    the following use-cases should be there:
                    a) All use-cases of phase 1 (see Phase 1 Deliverables document)
                    b) Password recovery
                    c) Encrypted TAN generation and delivery via e-mail to customer
                    d) Download of SCS after registration
                    e) Transfer using SCS
                    
                </section>


                <section data-state="vulns">
                    
                    Core of presentation: at this point in the presentation you must talk about:

                    Vulnerabilities (possible exploits of the vulnerabilities) and how you fixed them.
                    Feel free to go into technical details, but keep it short, clear and entertaining.
                    Report possible changes in OWASP and CVSS values (e.g. from high to medium,
                    etc.) including reasoning for these changes in the values.

                </section>


                <section>

                    <h1>
                        Thanks for your attention!
                    </h1>

                </section>


                <!-- FOLLOWING SECTIONS DONT NEED TO BE PRESENTED! -->


                <section>

                    <section>
                        Fix slides: For each vulnerability discovered in Phase 2 by your team or the team that tested your
                        application, you should summarize the fix that you implemented:
                         Path(s) of file(s) which was modified for the fix
                         Line number(s) which were modified in each file
                         NOTE: You can use a diff utility but you should only report the changes relevant for one particular
                        fix per vulnerability (not just a diff of all changes to phase 1).
                         Textual description of your countermeasures and the reason why they fix the problem.
                    </section>

                    <section>
                        <h2>OTG-AUTHN-003 <br> Weak lockout mechanism</h2>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>??</td>
                                <td>??</td>
                            </tr>
                            <tr>
                                <td>/gnb/project/employee/manage_blocked.php</td>
                                <td>New file</td>
                            </tr>
                            <tr>
                                <td>/gnb/project/js/employee.js</td>
                                <td>+lines 69-84</td>
                            </tr>
                            <tr>
                                <td>/gnb/project/models/user.php</td>
                                <td>+lines 141-154</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            A lockout mechanism was implemented: after failing a login 5 times in a row
                            (status is kept on database), a user account automatically gets blocked.
                            A new section in the employee area was added in order to allow employees
                            to unblock user accounts which have been blocked.
                        </p>
                    </section>
                    <section>
                        <h2>OTG-AUTHN-007 <br> Weak password policy</h2>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/project/js/registration.js</td>
                                <td>+lines 21-45</td>
                            </tr>
                            <tr>
                                <td>/gnb/project/registration/registration_request.php</td>
                                <td>+lines 3-15</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            In order to prevent weak passwords, the user is now forced to enter a password
                            between 8 and 20 characters long, containing at least 1 number and 1 letter. Any special
                            character is allowed. The password strength check is performed both on client side and
                            server side during the registration process.
                        </p>
                    </section>
                    <section>
                        <h2>OTG-AUTHZ-002 <br> Bypassing authorization schema</h2>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr class="smallText">
                                <td>/gnb/project/employee:<br>
                                    client_details.php,
                                    client_transaction_details.php,
                                    employee_area.php,
                                    employee_overview.php,
                                    manage_clients.php,
                                    manage_registration.php,
                                    manage_transfer.php,
                                    transfer_details.php,
                                    search_client.php
                                    </td>
                                <td>+lines 5-21</td>
                            </tr>
                            <tr class="smallText">
                                <td>/gnb/project/accounts:<br>
                                    account_overview.php,
                                    download_transactions.php,
                                    my_accounts.php,
                                    new_transaction.php,
                                    new_transaction_multiple.php,
                                    transaction_history.php,
                                    transaction_view.php,
                                    verify_transaction.php
                                </td>
                                <td>+lines 5-16</td>
                            </tr>
                            <tr class="smallText">
                                <td>/gnb/project/client/client_overview.php
                                </td>
                                <td>+lines 6-21</td>
                            </tr>
                            <tr class="smallText">
                                <td>/gnb/project/registration:<br>
                                    registration_default.php,
                                    registration_pin.php,
                                    registration_request.php
                                </td>
                                <td>+lines 5-14</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            Pages, sections and frames are no longer directly accessible, since checks
                            are performed at the beginning of each php file: only users with the correct
                            permissions are allowed to access specific pages.
                        </p>
                    </section>
                    <section>
                        <h2>OTG-AUTHZ-004 <br> Insecure Direct Object References</h2>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>?</td>
                                <td>?</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            Please refer to OTG-CRYPST-003 for this fix, since the vulnerability was based
                            on the usage of an unencrypted communication channel.
                        </p>
                    </section>
                    <section>
                        <h2>OTG-INPVAL-001 <br> Reflected Cross Site Scripting</h2>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>?</td>
                                <td>?</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            Reflected XSS worked on the verify_transaction.php page by printing
                            the description inserted by the user on the previous page. By performing input
                            sanitization on every request parameter, this attack is not longer possible.
                        </p>
                    </section>
                    <section>
                        <h2>OTG-INPVAL-002 <br> Stored Cross Site Scripting</h2>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>?</td>
                                <td>?</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            Similarly to the reflected XSS, the site was vulnerable because of lack of input
                            sanitization. All user inputs get now properly sanitized, removing html characters.
                        </p>
                    </section>
                    <section>
                        <h2>OTG-INPVAL-005 <br> SQL injection</h2>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>?</td>
                                <td>?</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            ?
                        </p>
                    </section>
                    <section>
                        <h2>OTG-INPVAL-013 <br> Command injection</h2>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/project/accounts/new_transaction_multiple.php</td>
                                <td>-lines 20-27<br>+lines 21-30</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            Since command injection was possible by injecting commands into filenames,
                            this is no longer possible as each uploaded file gets automatically renamed.
                            Even though the c parser receives additional parameters,
                            these are passed directly by the application and cannot be injected by an attacker.
                        </p>
                    </section>
                    <section>
                        <h2>OTG-INPVAL-014 <br> Buffer overflow</h2>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>?</td>
                                <td>?</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            The application was never vulnerable to buffer overflow,
                            but only to integer overflow. This was due to a comparison between a long long value and
                            an integer value inside the c parser. By changing the integer to a long long value,
                            this is no longer possible.
                        </p>
                    </section>
                    <section>
                        <h2>OTG-INPVAL-015 <br> Incubated vulnerabilities</h2>
                        <table class="fix-table">
                            <tr>
                                <th>Changed files</th>
                            </tr>
                            <tr>
                                <td>See fix slides OTG-INPVAL 001, 002, 005</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            By having fixed the SQL injection and stored XSS vulnerabilities,
                            this vulnerability was automatically fixed. Please refer to the fix
                            slides concerning OTG-INPVAL 001, 002, 005.
                        </p>
                    </section>
                    <section>
                        <h2>OTG-BUSLOGIC-001 <br> Business logic data validation</h2>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>?</td>
                                <td>?</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            In order to prevent a user incrementing his balance by sending money to his own account,
                            we added a check before performing a transaction.
                            A user is not allowed to use his own account as a destination anymore.
                        </p>
                    </section>
                    <section>
                        <h2>OTG-BUSLOGIC-007 <br> Defenses Against Application Mis-use</h2>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>?</td>
                                <td>?</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            Since the described vulnerability was the same as the one presented in OTG-BUSLOGIC-001,
                            please refer to the fix made in that section.
                        </p>
                    </section>
                    <section>
                        <h2>OTG-BUSLOGIC-009 <br> Upload of malicious files</h2>
                        <table class="fix-table">
                            <tr>
                                <th colspan="2">Changed files</th>
                            </tr>
                            <tr>
                                <td>/gnb/project/accounts/new_transaction_multiple.php</td>
                                <td>-lines 20-27<br>+lines 21-30</td>
                            </tr>
                        </table>
                        <p class="fix-description">
                            Each uploaded file now gets automatically renamed.
                            Furthermore, after a batch transaction process finished,
                            the uploaded file gets removed from the uploads folder.
                        </p>
                    </section>

                </section>


                <section>

                    Use-case slides: will serve as a user manual describing all the use-cases that work using the same
                    format as in the Phase 1 Deliverables document for each use-case.
                     Mention the format of the batch file and any other data formats needed to use the application!
                     Each use case must have a video (screencast) associate with it that demonstrates the main-flow
                    of the use-case. A user must be able to use the app by simply looking at the video.
                     The video must have the same name as the use-case and a resolution of 1280x1024.
                     The format of the video must be MP4, the video codec must be H.264 and the audio codec must
                    be AAC. The file must be located in the Videos-TeamX-Phase3 folder.
                     The quality of the video must be good enough to be able to read the text shown on the
                    screen.
                     In case passwords are typed in please add video annotations for the viewer to know the
                    password.

                </section>


                <section>


                    <section>
                        <h1>Time-Tracking</h1>
                    </section>


                    <!-- ATTENTION!!! "info / student / task at hour granularity" -->


                    <section>
                        <h1>Alexander Lill</h1>

                        <table>
                            <tr>
                                <th>Task</th>
                                <th>Time</th>
                            </tr>
                            <tr>
                                <td>ALL the things</td>
                                <td>42h</td>
                            </tr>
                        </table>

                    </section>


                    <section>
                        <h1>Lorenzo Donini</h1>

                        <table class="time-table-left">
                            <tr>
                                <th>Task</th>
                                <th>Time</th>
                            </tr>
                            <tr>
                                <td>Group meeting</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fix: resource mappings</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Fix: session</td>
                                <td>0.5h</td>
                            </tr>
                            <tr>
                                <td>Fix: password</td>
                                <td>0.5h</td>
                            </tr>
                            <tr>
                                <td>Fix: lockout mechanism</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Features/Use-cases testing</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Features/Use-cases bugfixing</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Registration: new business logic</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Registration: new GUI</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Registration: testing & fixing</td>
                                <td>1h</td>
                            </tr>
                        </table>
                        <table class="time-table-right">
                            <tr>
                                <td>Java SCS: GUI</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Java SCS: Business logic</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Java SCS: TAN generation</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Java SCS: Testing</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Transactions: single transactions logic changed</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Transactions: batch transactions logic changed</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Initialization of client balance added</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Presentation: core slides</td>
                                <td>1h</td>
                            </tr>
                            <tr>
                                <td>Presentation: fix slides</td>
                                <td>1h</td>
                            </tr>
                            <tr class="time-total">
                                <td>TOTAL</td>
                                <td>18h</td>
                            </tr>
                        </table>

                    </section>


                    <section>
                        <h1>Florian Mauracher</h1>

                        <table>
                            <tr>
                                <th>Task</th>
                                <th>Time</th>
                            </tr>
                            <tr>
                                <td>ALL the things</td>
                                <td>42h</td>
                            </tr>
                        </table>

                    </section>


                    <section>
                        <h1>Mahmoud Naser</h1>

                        <table>
                            <tr>
                                <th>Task</th>
                                <th>Time</th>
                            </tr>
                            <tr>
                                <td>ALL the things</td>
                                <td>42h</td>
                            </tr>
                        </table>
                    </section>


                </section>


            </div>
        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                transition: 'slide', // none/fade/slide/convex/concave/zoom

                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });
        </script>

    </body>
</html>
